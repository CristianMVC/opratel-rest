var c = require('modelo/Config');



var usuario = {};

usuario.addUser = function(username,passwoord,email,callback)
{
	
 if (c) 
    {
		
      c.query('INSERT INTO `usuario`(`username`, ` password`, `email`, `activo`) VALUES ('+c.escape(username)+','+connection.escape(passwoord)+','+connection.escape(email)+', 0)',function(error, result) 
    {
 if(error)
   {
    callback(null,{"Status_code" : error['code']});
   }
     else
   {

    callback(null,{"Status_code" : result.insertId});
   }
 });
 }
}


usuario.activateUser = function(username,callback)
{
	
if(c)
	{

		c.query('UPDATE usuario SET activo = 1 where username =' + c.escape(username) + '', function(error, result) 
		{
			if(error)
			{
				callback(null,{"Status_code" : error['code']});
			}
			else
			{
				
				if(result.changedRows == 0)
				   {
					 callback(null,{"Status_code":"Usuario inexistente"});  
				   }
				   
				callback(null,{"Status_code":"0"});
			}
		});
	}
}	
	


usuario.deactivateUser = function(username,callback)
{
	
if(c)
	{

		c.query('UPDATE usuario SET activo = 0 where username =' + c.escape(username) + '', function(error, result) 
		{
			
			if(error)
			{
				callback(null,{"Status_code" : error['code']});
			}
			else
			{
				
				if(result.changedRows == 0)
				   {
					 callback(null,{"Status_code":"Usuario inexistente"});  
				   }
				
				callback(null,{"Status_code":"0"});
			}
		});
	}
}	


usuario.getUser = function(username,callback)
{ 
 if (c) 
 {
  c.query('SELECT `username`, ` password`, `email` FROM usuario where username = '+c.escape(username), function(error, rows) {
    if(error)
      {
        callback(null,{"Status_code" : error['code']});
      }
       else
      {
        callback(null, rows);
      }
 });
 }
}
	
	
module.exports = usuario;	




